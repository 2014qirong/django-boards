{% extends './base_table.html' %}

{% block table_caption %}
{% if category.description.rendered %}
{{category.description.rendered}}
{% endif %}
{% endblock %}

{% block table_header %}
<thead>
  <tr>
    <th class="mdl-data-table__cell--non-numeric" width="50%">
      Subcategory
    </th>
    <th width="10%">
      Threads
    </th>
    <th width="10%">
      Posts
    </th>
    <th width="30%">
      Last Thread
    </th>
  </tr>
</thead>
{% endblock %}
{% block table_body %}
<tbody>
  {% for sub in subcategories %}
  <tr>
    <td class="mdl-data-table__cell--non-numeric">
      <p><a href="{% url 'board:subcategory' sub.obj.id %}">{{sub.obj.name}}</a></p>
      <p>{{sub.obj.description.rendered}}</p>
      {% if sub.can_post %}
      <p>
        <a href="{% url 'board:thread-create' sub.obj.id %}">
          <i class="fa fa-plus" aria-hidden="true"></i> Create Thread
        </a>
      </p>
      {% endif %}
    </td>
    <td>
      <p>{{sub.obj.thread_count}}</p>
    </td>
    <td>
      <p>{{sub.obj.post_count}}</p>
    </td>
    <td>
      {% if sub.obj.last_thread %}
      <p><a href="{% url 'board:thread' sub.obj.last_thread.id %}">{{sub.obj.last_thread.title|truncatechars_html:30}}</a></p>
      <p>{{sub.obj.last_thread.created}}</p>
      <p>by <a href="{% url 'board:profile' sub.obj.last_thread.user.username %}">{{sub.obj.last_thread.user.username}}</a></p>
      {% else %}
      <p>No Threads</p>
      {% endif %}
    </td>
  </tr>
  {% endfor %}
</tbody>
{% endblock %}
{% block table_footer %}{% endblock %}
