{% extends './base.html' %}
{% load static %}
{% load bbcode_tags %}

{% block title %}Members | {{user.username}}{% endblock %}

{% block breadcrumb %}
<ol class="breadcrumb">
  <li><a href="{% url 'board:index' %}">Forum</a></li>
  <li class="active">Profile</li>
</ol>
{% endblock %}

{% block content %}
<div class="panel panel-primary">
  <div class="panel-body">
    <img src="{{user.avatar}}">
    <h1>{{user.username}}</h1>
    <br>

    <h4>Email</h4>
    <p>{{user.email}}</p>

    <br>

    <h4>Gender</h4>
    <p>
      {{user.gender}}
    </p>

    <br>

    <h4>Birth date</h4>
    <p>
      {{user.birthday|date:'m/d/Y'}} ({{user.age}})
    </p>

    <br>

    <h4>Post Count</h4>
    <p>
      {{user.post_count}}
    </p>

    <br>

    {% if BOARD_SETTINGS.SIGNATURES_ENABLED %}
    <h4>Signature</h4>
    <p>
      {{user.signature.rendered}}
    </p>

    <br>
    {% endif %}

    <h4>Threads</h4>
    <table class="table">
      <thead>
        <tr>
          <th class="align-left" width="60%">
            Title
          </th>
          <th class="align-center" widht="10%">
            Posts
          </th>
          <th class="align-right hidden-xs" width="30%">
            Last Post
          </th>
        </tr>
      </thead>
      <tbody class="striped">
        {% for thread in user.threads.all %}
        <tr class="border-bottom">
          <td class="align-left">
            <p>
              <a href="{% url 'board:thread' thread.id %}">
                {{thread.title}}
              </a>
            </p>
            <p>
              {{thread.created}}
            </p>
          </td>
          <td class="align-center">
            <p>{{thread.posts_count}}</p>
          </td>
          <td class="align-right hidden-xs">
            {% if thread.last_post %}
            <p><a href="{% url 'board:profile' thread.last_post.user.username %}">{{thread.last_post.user.username}}</a></p>
            <p>{{thread.last_post.created}}</p>
            {% else %}
            <p>No Posts</p>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <br>

    <h4>Posts</h4>
    <table class="table">
      <thead>
        <tr>
          <th>
            Thread
          </th>
          <th class="align-right" width="30%">
            Date
          </th>
        </tr>
      </thead>
      <tbody class="striped">
        {% for post in user.posts.all %}
        <tr class="border-bottom">
          <td class="align-left">
            <a href="{% url 'board:thread' post.thread.id %}">
              {{post.thread.title}}
            </a>
          </td>
          <td class="align-right">
            {{post.created}}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
