{% extends './base.html' %}
{% load static %}

{% block title %}Members | {{user.username}}{% endblock %}

{% block content %}
<div class="pageHeader">
  <div class="djcontainer">
    <div class="pageHeader__flex">
      <div class="pageHeader__left">
        <div class="pageHeader__title">{{user.username}}</div>
      </div>
      <div class="pageHeader__right">
        <ul class="breadcrumb">
          <li><a href="{% url 'board:index' %}">Forum</a></li>
          <li>Profile</li>
        </ul>
      </div>
    </div>
  </div>
</div>
<div class="main">
  <div class="djcontainer">
    <div class="panel">
      <div class="panel__body padding">
        <center>
          <img src="{{user.avatar}}">
          <h2>{{user.username}}</h2>
        </center>
        <br>

        <h4>Email</h4>
        <p>{{user.email}}</p>

        <br>

        <h4>Gender</h4>
        <p>
          {{user.gender}}
        </p>

        <br>

        <h4>Birth date</h4>
        <p>
          {{user.birthday|date:'m/d/Y'}} ({{user.age}})
        </p>

        <br>

        <h4>Post Count</h4>
        <p>
          {{user.post_count}}
        </p>

        <br>

        <h4>Signature</h4>
        <p>
          {{user.signature.rendered}}
        </p>

        <br>

        <h4>Threads</h4>
        <br>
        <table class="table full-width">
          <thead>
            <tr>
              <th class="align-left" width="60%">
                Title
              </th>
              <th class="align-center" widht="10%">
                Posts
              </th>
              <th class="align-right hide-on-mobile" width="30%">
                Last Post
              </th>
            </tr>
          </thead>
          <tbody>
            {% for thread in user.threads.all %}
            <tr>
              <td class="align-left">
                <p>
                  <a href="{% url 'board:thread' thread.id %}">
                    {{thread.title}}
                  </a>
                </p>
                <p>
                  {{thread.created}}
                </p>
              </td>
              <td class="align-center">
                <p>{{thread.posts_count}}</p>
              </td>
              <td class="align-right hide-on-mobile">
                {% if thread.last_post %}
                <p><a href="{% url 'board:profile' thread.last_post.user.username %}">{{thread.last_post.user.username}}</a></p>
                <p>{{thread.last_post.created}}</p>
                {% else %}
                <p>No Posts</p>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>

        <br>

        <h4>Posts</h4>
        <br>
        <table class="table full-width">
          <thead>
            <tr>
              <th class="align-left">
                Thread
              </th>
              <th class="align-right" width="30%">
                Date
              </th>
            </tr>
          </thead>
          <tbody>
            {% for post in user.posts.all %}
            <tr>
              <td class="align-left">
                <a href="{% url 'board:thread' post.thread.id %}">
                  {{post.thread.title}}
                </a>
              </td>
              <td class="align-right">
                {{post.created}}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
